<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Mini PokÃ©mon RPG â€” Mobile</title>
 <link rel="stylesheet" href="style/style2.css">
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>



.battle-container {
  flex: 0.85;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;

  /* Set the background image */
  background: url('img/bg.png') no-repeat center center;
  background-size: cover; /* ensure it fills the container */

  border: 4px solid #333;
  border-radius: 8px;
  box-shadow: 4px 4px 0 #555;
  padding: 4px;
  box-sizing: border-box;
}


</style>

</head>
<body>

<!-- ================= BUTTONS ================= -->
<button id="viewToggleBtn">ðŸ”™ Back to PC View</button>
<button id="menuToggleBtn">â˜° Menu</button>

<!-- ================= MENU OVERLAY ================= -->
<div id="menuOverlay">
  <div class="menu-content">
    
    <!-- Menu Bar -->
    <div class="menu-bar">
      <button class="menu-tab" data-section="mapSection">Map</button>
      <button class="menu-tab" data-section="shopSection">Shop</button>
      <button class="menu-tab" data-section="storageSection">Storage</button>
      <button class="menu-tab" data-section="playerSection">Player</button>
    </div>

    <!-- Map Section -->
    <div id="mapSection" class="menu-section">
      <h3>Map</h3>
      <div id="regionButtons">
      
      </div>
      <div id="mapButtons">
       
      </div>
    </div>

   <div id="shopSection" class="menu-section">
  <h3>Shop</h3>

  <!-- Category buttons container -->
  <div id="shopCategoryButtons" class="item-category-buttons"></div>

  <!-- Items grid container -->
  <div id="shopItems"></div>

  <p id="playerCoins">Coins: 50</p>
</div>


    <!-- Storage Section -->
    <div id="storageSection" class="menu-section">
      <h3>Storage</h3>
      <div id="storageDisplay">
        <button>View Box 1</button>
        <button>View Box 2</button>
      </div>
    </div>

    <!-- Player Section -->
    <div id="playerSection" class="menu-section">
      <h3>Player</h3>
      <div id="playerDisplay">Lv: 5 | EXP: 0 | Coins: 100</div>
      <div class="player-buttons">
         <button onclick="healAllPokemon()">Heal All </button>
     <button onclick="saveGame()">Save</button>
    <button onclick="loadGame()">Load</button>
    <button onclick="clearSave()">Clear Save</button>
 <button onclick="toggleDarkMode()">ðŸŒ“ Dark Mode</button>
      </div>
    </div>

  </div>
</div>
<br>

<!-- ================= GBA SCREEN ================= -->
<div id="gbaScreen">
  <div class="gba-shell">

    <!-- Battle -->
    <div class="battle-container">
      <!-- Enemy -->
      <div class="enemy-container">
      <div class="spriteWrapper" id="wildSpriteWrapper">
  <img id="wildSprite">
</div>
        <div class="hp-box enemy-hp-box">
          <div class="name-level"><span id="wildName">â€”</span> Lv:<span id="wildLevel">0</span> <span id="wildCP">â€¢ CP 0</span></div>
          <div class="bars-row">
            <div class="hp-bar-outer"><div id="enemyHPBar" class="hp-bar-inner hp-green"></div></div>
            <div class="hp-bar-outer"><div id="enemyEnergyBar" class="hp-bar-inner hp-blue"></div></div>
          </div>
         <div class="hp-text"><span id="enemyHP">0</span>/<span id="enemyHPMax">0</span></div>
        </div>
      </div>

      <!-- Player -->
    <div class="player-container">
 
<div class="spriteWrapper" id="playerSpriteWrapper">
  <img id="playerSprite">
</div>

        <img id="pokeballThrow"  alt="" src="img/greatball.png" 
          style="position:absolute; left:-50%; top:70%; width:40px; height:40px; transform:translateX(-50%) translateY(0); display:none;" >
        <div class="hp-box player-hp-box">
          <div class="name-level"><span id="activeName">â€”</span> <span id="activeLevel">0</span> <span id="playerCP">â€¢ CP 0</span></div>
          <div class="bars-row">
            <div class="hp-bar-outer"><div id="playerHPBar" class="hp-bar-inner hp-green"></div></div>
            <div class="hp-bar-outer"><div id="playerEnergyBar" class="hp-bar-inner hp-blue"></div></div>
          </div>
          <div class="hp-text"><span id="playerHP">0</span>/<span id="playerHPMax">0</span></div>
        </div>
      </div>
    </div>

  <!-- Message box -->
<div class="message-box" id="battleMessage">Welcome to PokÃ©mon!</div>

<!-- Battle / Moves Menu -->
<div class="moves-box">

  <!-- Search Wild -->
  <div class="menu-row">
    <button onclick="encounterWild()">Search Wild</button>
  </div>

  <!-- Main Battle Menu (visible by default) -->
  <div id="battleMenu" class="battle-submenu" style="display:flex;">
    <div class="menu-row">
      <button onclick="showFightMenu()">FIGHT</button>
      <button onclick="showBagMenu()">BAG</button>
    </div>
    <div class="menu-row">
      <button onclick="showPokemonMenu()">POKÃ‰MON</button>
      <button onclick="playerTurn('flee')">RUN</button>
    </div>
  </div>

  <!-- Fight Menu (hidden initially) -->
  <div id="fightMenu" class="battle-submenu" style="display:none;">
    <div class="menu-row">
      <button id="move0" onclick="playerTurn('attack',{moveIndex:0})">â€”</button>
      <button id="move1" onclick="playerTurn('attack',{moveIndex:1})">â€”</button>
    </div>
    <div class="menu-row">
      <button id="move2" onclick="playerTurn('attack',{moveIndex:2})">â€”</button>
      <button id="move3" onclick="playerTurn('attack',{moveIndex:3})">â€”</button>
    </div>
    <div class="menu-row">
      <button onclick="backToBattleMenu()">BACK</button>
    </div>
  </div>
<div id="bagMenu" class="battle-submenu" style="display:none;">
  <!-- Category Buttons -->
  <div class="item-category-buttons" id="itemCategories"></div>

  <!-- Items Grid -->
  <div id="itemsDisplay" style="display:grid; grid-template-columns: repeat(2, 1fr); gap:4px;"></div>

  <div class="menu-row">
    <button onclick="backToBattleMenu()">BACK</button>
  </div>
</div>


  <!-- PokÃ©mon Menu (hidden initially) -->
  <div id="pokemonMenu" class="battle-submenu" style="display:none;">
    <div id="partyDisplay">Party PokÃ©mon here</div>
    <div class="menu-row">
      <button onclick="backToBattleMenu()">BACK</button>
    </div>
  </div>
</div>
</div>
</div>
<script>
// ================= BACK BUTTON =================
document.getElementById('viewToggleBtn').onclick = () => {
  window.location.href = 'index.html';
};





// ================= MENU OVERLAY / MENU BAR =================
const menuBarBtn = document.getElementById('menuToggleBtn');
const menuOverlay = document.getElementById('menuOverlay');
const menuTabs = document.querySelectorAll('.menu-tab');
const menuSections = document.querySelectorAll('.menu-section');

// Toggle overlay menu
menuBarBtn.addEventListener('click', () => {
  menuOverlay.style.display = menuOverlay.style.display === 'flex' ? 'none' : 'flex';
});

// Close overlay if click outside content
menuOverlay.addEventListener('click', e => {
  if(e.target === menuOverlay) menuOverlay.style.display = 'none';
});

// Menu tab switching
menuSections.forEach(section => section.style.display = 'none'); // hide all initially
menuTabs.forEach(tab => {
  tab.addEventListener('click', () => {
    const targetId = tab.dataset.section;
    menuSections.forEach(section => {
      section.style.display = (section.id === targetId) ? 'block' : 'none';
    });
  });
});

// ================= DARK MODE =================
function toggleDarkMode() {
  document.body.classList.toggle('dark-mode');
  localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
}
if(localStorage.getItem('darkMode')==='true') {
  document.body.classList.add('dark-mode');
}

// ================= BATTLE MENUS =================
const battleMenu = document.getElementById('battleMenu');
const fightMenu = document.getElementById('fightMenu');
const bagMenu = document.getElementById('bagMenu');
const pokemonMenu = document.getElementById('pokemonMenu');

function hideAllBattleSubmenus() {
  fightMenu.style.display = 'none';
  bagMenu.style.display = 'none';
  pokemonMenu.style.display = 'none';
}

function showBattleMenu() {
  hideAllBattleSubmenus();
  battleMenu.style.display = 'flex';
}

function showFightMenu() {
  hideAllBattleSubmenus();
  battleMenu.style.display = 'none';
  fightMenu.style.display = 'flex';
}

// ================= BAG RENDER =================
function showBagMenu() {
  hideAllBattleSubmenus();
  battleMenu.style.display = 'none';
  bagMenu.style.display = 'flex';

  // Call renderBagItems instead of old updateItemsDisplay
  renderBagItems();
}



function showPokemonMenu() {
  hideAllBattleSubmenus();
  battleMenu.style.display = 'none';
  pokemonMenu.style.display = 'flex';
}

function backToBattleMenu() {
  showBattleMenu();
}
document.querySelectorAll('.map-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const route = btn.dataset.route;
    selectRoute(route);
    menuOverlay.style.display = 'none';
  });
});



// Initialize battle menu on page load
document.addEventListener('DOMContentLoaded', () => {
  showBattleMenu();
});

</script>



<script src="data/movesdb.js"></script>
<script src="data/pokemondb.js"></script>
<script src="data/pokemonImages.js"></script>
<script src="data/routes.js"></script>

<script src="js/game.js"></script>
<script src="js/battle.js"></script>

<script src="js/player.js"></script>
<script src="js/item.js"></script>
<script src="util/settings.js"></script>

</body>
</html>
